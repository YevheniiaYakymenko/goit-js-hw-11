{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '43963855-b23ab28bc2f72f8207f09d24a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = query => {\n  const searchParams = new URLSearchParams({\n    key: `${API_KEY}`,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}?${searchParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n\n    return response.json();\n  });\n};\n","export function createGalleryItemMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"small-info\">\n             <small class=\"text-body-likes\">Likes: ${likes}</small>\n             <small class=\"text-body-views\">Views: ${views}</small>\n             <small class=\"text-body-comments\">Comments: ${comments}</small>\n             <small class=\"text-body-downloads\">Downloads: ${downloads}</small>\n            </div>\n          </li>`;\n      }\n    )\n    .join('');\n}\n","import { fetchPhotosByQuery } from './js/pixabay-api';\nimport { createGalleryItemMarkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-list');\nconst loaderEl = document.querySelector('.loader');\nlet lightbox;\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n  const searchQuery = event.target.querySelector('.form-input').value.trim();\n  galleryEl.innerHTML = '';\n  if (searchQuery === '') {\n    event.target.reset();\n    iziToast.show({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  loaderEl.classList.remove('is-hidden');\n\n  fetchPhotosByQuery(searchQuery)\n    .then(imagesData => {\n      if (imagesData.hits.length === 0) {\n        iziToast.show({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        const markup = createGalleryItemMarkup(imagesData.hits);\n        galleryEl.insertAdjacentHTML('beforeend', markup);\n\n        if (lightbox) {\n          lightbox.refresh();\n        } else {\n          lightbox = new SimpleLightbox('.gallery-list a', {\n            captionsData: 'alt',\n            captionPosition: 'bottom',\n            captionDelay: 250,\n            className: 'my-custom-lightbox',\n          });\n        }\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      event.target.reset();\n      loaderEl.classList.add('is-hidden');\n    });\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["API_KEY","BASE_URL","fetchPhotosByQuery","query","searchParams","response","createGalleryItemMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","galleryEl","loaderEl","lightbox","onSearchFormSubmit","event","searchQuery","iziToast","imagesData","markup","SimpleLightbox","error"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAqBC,GAAS,CACzC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,GAAGJ,CAAO,GACf,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGF,CAAQ,IAAIG,CAAY,EAAE,EAAE,KAAKC,GAAY,CAC3D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAGrC,OAAOA,EAAS,MACpB,CAAG,CACH,ECnBO,SAASC,EAAwBC,EAAQ,CAC9C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,4CAC6BL,CAAa;AAAA,8CACXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,qDAGnBC,CAAK;AAAA,qDACLC,CAAK;AAAA,2DACCC,CAAQ;AAAA,6DACNC,CAAS;AAAA;AAAA,gBAIjE,EACA,KAAK,EAAE,CACZ,CCnBA,MAAMC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAY,SAAS,cAAc,eAAe,EAClDC,EAAW,SAAS,cAAc,SAAS,EACjD,IAAIC,EACJ,SAASC,EAAmBC,EAAO,CACjCA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,cAAc,aAAa,EAAE,MAAM,OAEpE,GADAJ,EAAU,UAAY,GAClBK,IAAgB,GAAI,CACtBD,EAAM,OAAO,QACbE,EAAS,KAAK,CACZ,MAAO,QACP,QACE,0EACR,CAAK,EACD,MACD,CAEDL,EAAS,UAAU,OAAO,WAAW,EAErCf,EAAmBmB,CAAW,EAC3B,KAAKE,GAAc,CAClB,GAAIA,EAAW,KAAK,SAAW,EAC7BD,EAAS,KAAK,CACZ,MAAO,QACP,QACE,0EACZ,CAAS,MACI,CACL,MAAME,EAASlB,EAAwBiB,EAAW,IAAI,EACtDP,EAAU,mBAAmB,YAAaQ,CAAM,EAE5CN,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIO,EAAe,kBAAmB,CAC/C,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,UAAW,oBACvB,CAAW,CAEJ,CACP,CAAK,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbN,EAAM,OAAO,QACbH,EAAS,UAAU,IAAI,WAAW,CACxC,CAAK,CACL,CAEAF,EAAa,iBAAiB,SAAUI,CAAkB"}